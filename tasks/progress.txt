## Codebase Patterns
- Tauri v2 with React 19 + TypeScript frontend
- Tailwind CSS v4 with custom Apple-inspired design tokens in index.css
- Semantic colors via CSS variables: --background, --foreground, --secondary, --accent, --border, --card
- Tauri plugins already installed: dialog, fs, shell
- Use `pnpm run build` (runs tsc && vite build) for frontend typecheck/build
- Use `cargo build` in src-tauri for Rust backend builds
- SF Pro font family set in body CSS
- Components go in src/components/ directory
- Use .drag-region class for titlebar drag areas, .no-drag for buttons inside
- Use `invoke<T>("command", { args })` from `@tauri-apps/api/core` to call Tauri commands
- Register Tauri commands via `.invoke_handler(tauri::generate_handler![cmd1, cmd2])` in lib.rs

---

## Initial Setup - PRD Creation
Thread: https://ampcode.com/threads/T-019bab7f-d939-7764-bbdc-58a7742152ce
- Created prd.json with 28 properly-sized user stories
- Stories ordered by dependency: layout → stores → UI components → Tauri commands → build loop
- Each story is scoped to be completable in one iteration
---

## 2026-01-10 - US-001
Thread: https://ampcode.com/threads/T-019bab7f-d939-7764-bbdc-58a7742152ce
- Implemented sidebar layout shell with 3-column structure
- Files changed: src/App.tsx, src/components/Sidebar.tsx, src/components/MainContent.tsx, src/index.css
- **Learnings for future iterations:**
  - Sidebar uses backdrop-blur-xl for vibrancy effect
  - Added .drag-region and .no-drag CSS classes for macOS window dragging
  - Tailwind v4 uses @theme directive for custom color definitions
---

## 2026-01-10 - US-002
Thread: https://ampcode.com/threads/T-019bab84-01eb-758b-9a4b-14253920f7ab
- Installed zustand package (v5.0.9)
- Created src/stores/projectStore.ts with full project state management
- Implemented Project type: { id, name, description, path, status, createdAt }
- Implemented actions: addProject, removeProject, setActiveProject, updateProject
- Files changed: package.json, pnpm-lock.yaml, src/stores/projectStore.ts
- **Learnings for future iterations:**
  - Zustand uses `create<StateType>((set) => ({...}))` pattern in v5
  - Don't include unused `get` parameter in zustand create callback - TypeScript will error
  - Use `crypto.randomUUID()` for generating unique IDs
---

## 2026-01-10 - US-003
Thread: https://ampcode.com/threads/T-019bab85-fb5d-7443-b0e7-b718a89c4b60
- Implemented NewProjectModal component with all required fields
- Files changed: src/components/NewProjectModal.tsx, src/App.tsx
- **Learnings for future iterations:**
  - Modal uses fixed positioning with bg-black/50 overlay for dimming
  - Use `no-drag` class on modal content to prevent window dragging
  - Input focus ring uses `focus:ring-2 focus:ring-accent` pattern
  - Clicking overlay triggers close via `e.target === e.currentTarget` check
---

## 2026-01-10 - US-004
Thread: https://ampcode.com/threads/T-019bab87-c54b-76d6-92ed-1824e47cd5e1
- Implemented directory picker integration using @tauri-apps/plugin-dialog
- Directory picker button now invokes Tauri dialog with directory: true option
- Selected path displayed in modal's directory field
- Default path set to Documents folder using documentDir() from @tauri-apps/api/path
- Files changed: src/components/NewProjectModal.tsx
- **Learnings for future iterations:**
  - Use `open({ directory: true, defaultPath })` from @tauri-apps/plugin-dialog for directory selection
  - Import `documentDir` from `@tauri-apps/api/path` to get Documents folder path
  - Dialog permissions already configured in src-tauri/capabilities/default.json
---

## 2026-01-10 - US-005
Thread: https://ampcode.com/threads/T-019bab89-42b3-763e-958b-50d9eb34d5e0
- Implemented Tauri `create_project` command in Rust
- Command creates project folder with .ideate/ subdirectory and config.json
- Connected frontend to call command on Create button click via `invoke()`
- Project added to Zustand store after successful disk creation
- Modal closes on success
- Files changed: src-tauri/src/lib.rs, src-tauri/Cargo.toml, src/App.tsx
- **Learnings for future iterations:**
  - Use `invoke<ReturnType>("command_name", { args })` from `@tauri-apps/api/core` to call Tauri commands
  - Tauri commands use snake_case on Rust side, frontend uses camelCase for args
  - Added chrono crate for timestamp generation in Rust
  - Register commands via `.invoke_handler(tauri::generate_handler![command_name])` in tauri::Builder
---

## 2026-01-10 - US-006
Thread: https://ampcode.com/threads/T-019bab8c-a1f6-76c1-a1d1-84c43f770bec
- Implemented project list display in Sidebar component
- Added status indicator dots with color mapping: gray (idle), blue (generating), green (ready), red (error)
- Implemented click-to-select with active state highlighting using accent background
- Files changed: src/components/Sidebar.tsx
- **Learnings for future iterations:**
  - Use Record<ProjectStatus, string> for type-safe status color mappings
  - Conditional classes pattern: `${isActive ? 'active-styles' : 'default-styles'}`
  - Import types with `type` keyword for type-only imports
---

## 2026-01-10 - US-007
Thread: https://ampcode.com/threads/T-019bab8d-f694-742b-a946-84e30b92c747
- Created ProjectView component showing project name, description, and empty PRD state
- MainContent now conditionally renders ProjectView when a project is active
- Files changed: src/components/ProjectView.tsx, src/components/MainContent.tsx
- **Learnings for future iterations:**
  - Use `projects.find((p) => p.id === activeProjectId)` to get active project
  - Empty states follow card pattern: rounded-xl border with centered content
  - ProjectView uses max-w-3xl mx-auto for constrained, centered content
---

## 2026-01-10 - US-008
Thread: https://ampcode.com/threads/T-019bab8f-70d2-72c9-8d41-bbeddf543983
- Created src/stores/prdStore.ts with full PRD state management
- Implemented Story type matching Ralph format: { id, title, description, acceptanceCriteria, priority, passes, notes }
- Implemented status tracking: idle/generating/ready/error
- Implemented actions: setStories, updateStory, addStory, removeStory, setStatus
- Files changed: src/stores/prdStore.ts
- **Learnings for future iterations:**
  - Story ID generation uses priority for consistency: `US-${String(priority).padStart(3, '0')}`
  - PrdStore follows same pattern as projectStore with create<StateType>((set) => ({...}))
---

## 2026-01-10 - US-009
Thread: https://ampcode.com/threads/T-019bab90-ce9d-7212-a042-e327d0b5977e
- Created StoryCard component with ID badge, title, truncated description, criteria count, status badge
- Created StoryList component that renders stories from prdStore
- Integrated StoryList into ProjectView (shows story list when stories exist, empty state otherwise)
- Status colors: pending (gray), in-progress (blue), complete (green), failed (red)
- Cards are clickable and log story ID to console
- Files changed: src/components/StoryCard.tsx, src/components/StoryList.tsx, src/components/ProjectView.tsx
- **Learnings for future iterations:**
  - Use `line-clamp-2` for truncating text to 2 lines
  - Status is derived from story.passes: true=complete, false=pending (can be extended later for in-progress/failed)
  - Story status colors use Tailwind opacity pattern: `bg-green-500/20 text-green-500`
---

## 2026-01-10 - US-010
Thread: https://ampcode.com/threads/T-019babb8-a3bc-739d-811a-cd2acfe7bf05
- Implemented expandable story card with full detail view
- Added useState to track expanded/collapsed state
- Expanded view shows: full description, acceptance criteria as visual checklist, notes if present
- Close button (X icon) collapses the card
- Checkmarks display on criteria when story.passes is true
- Files changed: src/components/StoryCard.tsx
- **Learnings for future iterations:**
  - Use useState for local expand/collapse state in cards
  - Visual-only checkboxes use border div with conditional check SVG inside
  - Use e.stopPropagation() on close button to prevent re-triggering card click
---

## 2026-01-10 - US-011
Thread: https://ampcode.com/threads/T-019babba-2983-779e-bc8b-80c1bc167a8f
- Created Tauri `load_prd` command that reads <project>/.ideate/prd.json
- Command returns parsed user stories array or null if file doesn't exist
- Added Story and Prd structs in Rust with proper serde rename attributes for camelCase
- Updated MainContent to call load_prd via useEffect when activeProject changes
- Stories populated in prdStore on successful load, status set to "ready"
- Files changed: src-tauri/src/lib.rs, src/components/MainContent.tsx
- **Learnings for future iterations:**
  - Use #[serde(rename = "camelCase")] for JSON field name mappings in Rust structs
  - load_prd returns Option<Vec<Story>> to handle missing prd.json gracefully
  - useEffect dependency should use activeProject?.path for proper reactive loading
---
